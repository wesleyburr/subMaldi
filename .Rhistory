devtools::checkRdaFiles()
tools::checkRdaFiles
tools::checkRdaFiles()
tools::checkRdaFiles(./data/)
tools::checkRdaFiles("./data/")
getwd()
setwd("~/src/subMaldi")
tools::checkRdaFiles("./data/")
data("Master2")
ex <- normSpectra(dat = Master2, mass_dat = "full_mz", norm_mz = 54, method = "custom_imprecise",
spectra_cols = c("Blank1", "Before1", "Before2"))
library("subMALDI")
ex <- normSpectra(dat = Master2, mass_dat = "full_mz", norm_mz = 54, method = "custom_imprecise",
spectra_cols = c("Blank1", "Before1", "Before2"))
str(Master2)
Master2$full_mz[100]
ex <- normSpectra(dat = Master2, mass_dat = "full_mz", norm_mz = 54.75, method = "custom_imprecise",
spectra_cols = c("Blank1", "Before1", "Before2"))
max(Master2$Before1)
which(Master2$Before1 >= 2259690856
)
Master2$full_mz[20092]
ex <- normSpectra(dat = Master2, mass_dat = "full_mz", norm_mz = 255.23,
method = "custom_imprecise", spectra_cols = c("Blank1", "Before1", "Before2"))
CheckLazyDataCompression()
CheckLazyDataCompression <- function(pkg)
{
pkg_name <- sub("_.*", "", pkg)
lib <- tempfile(); dir.create(lib)
zs <- c("gzip", "bzip2", "xz")
res <- integer(3); names(res) <- zs
for (z in zs) {
opts <- c(paste0("--data-compress=", z),
"--no-libs", "--no-help", "--no-demo", "--no-exec", "--no-test-load")
install.packages(pkg, lib, INSTALL_opts = opts, repos = NULL, quiet = TRUE)
res[z] <- file.size(file.path(lib, pkg_name, "data", "Rdata.rdb"))
}
ceiling(res/1024)
}
CheckLazyDataCompression(subMALDI)
CheckLazyDataCompression("subMALDI")
pkgdown::build_site()
roxygen2::()
roxygen2::roxygenize()
roxygen2::roxygenize()
pkgdown::build_site()
detach("package:subMALDI", unload = TRUE)
library("subMALDI")
file_loc <- system.file("extdata", "raw_ascii.ascii", package = "subMALDI")
file_loc
?system.file
system.file("raw_ascii.ascii", package = "subMALDI")
file_loc <- system.file("extdata", "raw_test_file.ascii", package = "subMALDI")
file_loc
converted <- read_ascii(filename = file_loc)
filename = file_loc
txt <- unlist(read.table(file = filename))
regex <- gsub(pattern = "[^,]*,[^,]*\\K", replacement = ",\n", x = txt, perl = TRUE)
regex <- gsub(pattern = ",", replacement = " ", x = regex, perl = TRUE)
tbl <- utils::read.table(text = regex, header = FALSE, col.names = c("m/z", "intensity"),
fill = TRUE, row.names = NULL)
tbl <- tbl[-(1:4),]
tbl
